from langchain.agents import create_agent
from langchain.tools import tool
from langchain_openai import AzureChatOpenAI
from langchain.messages import HumanMessage

# -----------------------
# Tools
# -----------------------
@tool
def search(query: str) -> str:
    """Search for information."""
    return f"Results for query: {query}"

@tool
def get_weather(location: str) -> str:
    """Get weather information for a location."""
    return f"Weather in {location}: Sunny, 72Â°F"

tools = [search, get_weather]

# -----------------------
# Model (Azure OpenAI)
# -----------------------
model = AzureChatOpenAI(
    azure_endpoint="https://<your-resource>.openai.azure.com/",
    azure_deployment="<your-deployment>",
    openai_api_version="2024-02-15-preview",
    model="gpt-4o-mini",
    temperature=0.1,
    max_tokens=1000,
    timeout=30,
    validate_base_url=False,
)

# -----------------------
# Agent (LangGraph-based)
# -----------------------
agent = create_agent(
    model=model,
    tools=tools,
    system_prompt="You are a helpful assistant. Be concise and accurate.",
)

# -----------------------
# Invoke
# -----------------------
result = agent.invoke(
    {
        "messages": [
            HumanMessage(content="Search for AI news and summarize it")
        ]
    }
)

print(result["output"])
